window.__require=function e(t,n,c){function i(r,s){if(!n[r]){if(!t[r]){var l=r.split("/");if(l=l[l.length-1],!t[l]){var a="function"==typeof __require&&__require;if(!s&&a)return a(l,!0);if(o)return o(l,!0);throw new Error("Cannot find module '"+r+"'")}r=l}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){return i(t[r][1][e]||e)},u,u.exports,e,t,n,c)}return n[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<c.length;r++)i(c[r]);return i}({Record:[function(e,t,n){"use strict";cc._RF.push(t,"27fd02cQutDsIrWJhLVXtqr","Record"),function(){cc.Class({extends:cc.Component,properties:{},onLoad:function(){return cc.game.addPersistRootNode(this.node)},setData:function(e){return this._data=e},getData:function(){return this._data}})}.call(this),cc._RF.pop()},{}],Utils:[function(e,t,n){"use strict";cc._RF.push(t,"c21fa4wHQtL0K3I10ci/yel","Utils"),function(){var e;e={bindEvent:function(e,t){return cc.director.getScene().getChildByName("LogicNode").on(e,t)},triggerEvent:function(e,t){return cc.director.getScene().getChildByName("LogicNode").emit(e,t)},getDataFromNode:function(){return cc.director.getScene().getChildByName("RecordNode").getComponent("Record").getData()},setDataOnNode:function(e){return cc.director.getScene().getChildByName("RecordNode").getComponent("Record").setData(e)},formatNum:function(e){return(e+"").replace(/\d{1,3}(?=(\d{3})+$)/g,"$&,")},setItem:function(e,t){return cc.sys.localStorage.setItem(e,JSON.stringify(t))},getItem:function(e){try{return JSON.parse(cc.sys.localStorage.getItem(e))}catch(e){}},reverseTable:function(e){var t,n,c;for(c=[],t=e.length-1;t>=0;t+=-1)n=e[t],c.push(n);return c},randomInt:function(e,t,n){return null==n&&(n=Math.random),Math.floor(n()*(t-e+1))+e}},t.exports=e}.call(this),cc._RF.pop()},{}],gameOver:[function(e,t,n){"use strict";cc._RF.push(t,"41223xFpAhO6roBsAjFxhHt","gameOver"),function(){var t;t=e("../common/Utils"),cc.Class({extends:cc.Component,properties:{tips:cc.Label},onLoad:function(){var e;return e=t.getDataFromNode(),this.tips.string="ok"===e?"\u606d\u559c\u4f60\u901a\u5173":"\u52a0\u6cb9\uff0c\u8fd8\u5dee\u4e00\u6b65"},update:function(e){},onReturn:function(){return cc.director.loadScene("main")}})}.call(this),cc._RF.pop()},{"../common/Utils":"Utils"}],game:[function(e,t,n){"use strict";cc._RF.push(t,"c94b8coh29DpZovAgeEbMFD","game"),function(){var t;t=e("../common/Utils"),cc.Class({extends:cc.Component,properties:{mainGameRect:cc.Node,collectRect:cc.Node,iconPanel:cc.Node,iconPrefab:cc.Prefab,leftRect:cc.Node,rightRect:cc.Node},onLoad:function(){return t.triggerEvent("game_get_level",function(e){return function(t){return e._level=t}}(this)),this._deskIconNodeTable=[],this._collectPositionTable=[],this._iconSize=80,this._deskIndex=0,this._initDesk(),this._registerEvent(),this._initCollectPosition()},_initCollectPosition:function(){var e,t;for(4,0,e=t=0;t<=7;e=++t)this._collectPositionTable.push(cc.v2(20+(this._iconSize+0)*e,0))},_createIcon:function(e,t){var n;return(n=cc.instantiate(this.iconPrefab)).setScale(.6),n.setPosition(e),n.getComponent("iconView").setSprite(t,this._deskIndex),n},_initSideCard:function(e){var n,c,i,o,r,s,l;for(s=this.generateIconPositionInSide(e),s=t.reverseTable(s),r=0,n=i=0,o=(l=this._level).length;i<o;n=++i)if(l[n],!(n<this._deskIndex)){if(r>=s.length)break;c=this._createIcon(s[r],this._level[this._deskIndex]),this._deskIconNodeTable.push(c),this.iconPanel.addChild(c),r++,this._deskIndex++}},_initDesk:function(){var e,t,n,c,i,o;for(t=n=0,c=(o=this.generateIconPositionInMiddle()).length;n<c;t=++n)i=o[t],e=this._createIcon(i,this._level[this._deskIndex]),this._deskIndex++,this._deskIconNodeTable.push(e),this.iconPanel.addChild(e);this._initSideCard(this.leftRect),this._initSideCard(this.rightRect)},generateIconPositionInSide:function(e){var t,n,c,i,o;for(10,10,c=[],t=n=0,10;n<10;t=++n)i=cc.v2(0,10*t),o=e.convertToWorldSpaceAR(i),c.push(o);return c},generateIconPositionInMiddle:function(){var e,t,n,c,i,o,r;for(7,4,e=(cc.size(500,500).width-7*this._iconSize)/2,600,80,o=[],n=c=0,4;c<4;n=++c)for(t=i=0,r=7;0<=r?i<r:i>r;t=0<=r?++i:--i)o.push(cc.v2(80+e+this._iconSize*t,600+(this._iconSize+10)*n));return o},_registerEvent:function(){return t.bindEvent("insertPos",function(e){return function(t){var n,c,i;for(c=0,i=t.length;c<i;c++)n=t[c],e._deskIconNodeTable[n.deskIndex].runAction(cc.moveBy(.5,cc.v2(e._iconSize,0)))}}(this)),t.bindEvent("eraseMoveLeft",function(e){return function(t){var n,c,i;for(c=0,i=t.length;c<i;c++)n=t[c],e._deskIconNodeTable[n.deskIndex].runAction(cc.moveBy(.5,cc.v2(-3*e._iconSize,0)))}}(this)),t.bindEvent("flyIcon",function(e){return function(t){var n,c,i,o;return c=t.deskIndex,n=t.callback,i=t.num,cc.log("collectRect",e.collectRect),o=e.collectRect.convertToWorldSpaceAR(e._collectPositionTable[i]),e._deskIconNodeTable[c].runAction(cc.moveTo(.2,o)),(new Date).getTime(),e.scheduleOnce(function(){return n()},.5)}}(this)),t.bindEvent("eraseElement",function(e){return function(t){var n,c,i;for(c=0,i=t.length;c<i;c++)n=t[c],function(t){return e._destoryIconNode(t)}(e._deskIconNodeTable[n]);return e.scheduleOnce(function(){return e._checkIsGameOver()},.1)}}(this))},_destoryIconNode:function(e){var t;return(t=[]).push(cc.scaleTo(.1,.1)),t.push(cc.callFunc(function(){return e.destroy()})),e.runAction(cc.sequence(t))},_checkIsGameOver:function(){var e,n,c,i,o,r;for(c=!0,n=i=0,o=(r=this._deskIconNodeTable).length;i<o;n=++i)if(e=r[n],cc.log(n,cc.isValid(e)),cc.isValid(e)){c=!1;break}if(!0===c)return t.setDataOnNode("ok"),cc.director.loadScene("gameover")},update:function(e){}})}.call(this),cc._RF.pop()},{"../common/Utils":"Utils"}],iconView:[function(e,t,n){"use strict";cc._RF.push(t,"871907MDzZJ9IEyYOoRIm8t","iconView"),function(){var t;t=e("../common/Utils"),cc.Class({extends:cc.Component,properties:{icon1:cc.SpriteFrame,icon2:cc.SpriteFrame,icon3:cc.SpriteFrame,icon4:cc.SpriteFrame,icon5:cc.SpriteFrame,icon6:cc.SpriteFrame,icon7:cc.SpriteFrame,icon8:cc.SpriteFrame,icon9:cc.SpriteFrame,icon10:cc.SpriteFrame,icon11:cc.SpriteFrame},onLoad:function(){},update:function(e){},setSprite:function(e,t){return this._index=e,this._deskIndex=t,this._iconTable=[this.icon1,this.icon2,this.icon3,this.icon4,this.icon5,this.icon6,this.icon7,this.icon8],this.node.getComponent(cc.Sprite).spriteFrame=this._iconTable[this._index]},onClick:function(){return t.triggerEvent("game_click",{iconIndex:this._index,deskIndex:this._deskIndex})}})}.call(this),cc._RF.pop()},{"../common/Utils":"Utils"}],logic:[function(e,t,n){"use strict";cc._RF.push(t,"65117tluGBAuJ3L8kEkj7YL","logic"),function(){var t;t=e("../common/Utils"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){return this._registerEventListener(),cc.game.addPersistRootNode(this.node),this._collectTable=[]},_findLastIndex:function(e){var t,n,c;for(n=t=(c=this._collectTable).length-1;t>=0;n=t+=-1)if(c[n].iconIndex===e)return n;return-1},_interElement:function(e,t){var n,c,i,o,r,s,l,a,u,d,h,f;if(-1!==(l=this._findLastIndex(e))){if(l===this._collectTable.length-1)return this._collectTable.push({iconIndex:e,deskIndex:t}),[r=l+1,null];for(n=[],r=0,o=i=0,a=(h=this._collectTable).length;i<a;o=++i){if(c=h[o],!(o<=l)){r=l+1,n.push({iconIndex:e,deskIndex:t});break}n.push(c)}for(d=[],o=s=0,u=(f=this._collectTable).length;s<u;o=++s)c=f[o],o<=l||(n.push(c),d.push(c));return this._collectTable=n,[r,d]}return r=this._collectTable.length,this._collectTable.push({iconIndex:e,deskIndex:t}),[r,null]},_eraseElement:function(){var e,n,c,i,o,r,s,l,a,u,d,h,f,_,g,m,p,v,I,b;for(i={},c=0,a=(p=this._collectTable).length;c<a;c++)null==i[h=(e=p[c]).iconIndex]&&(i[h]=[]),i[e.iconIndex].push(e.deskIndex);for(l in _=[],f=-1,i)if((b=i[l]).length>=3){_=b,f=Number(l);break}if(-1!==f){for(t.triggerEvent("eraseElement",_),n=this._findLastIndex(f),g=[],o=r=0,u=(v=this._collectTable).length;r<u;o=++r)e=v[o],o<=n||g.push(e);for(t.triggerEvent("eraseMoveLeft",g),m=[],o=s=0,d=(I=this._collectTable).length;s<d;o=++s)e=I[o],n-2<=o&&o<=n||m.push(e);return this._collectTable=m}},_createLevel:function(){var e,n,c,i;for(48,i=!1,0;!1===i;){for(n=[],e=0,c=48;0<=c?e<c:e>c;0<=c?++e:--e)n.push(t.randomInt(0,7));i=this._checkLevelVaild(n),0}return n},_checkLevelVaild:function(e){var t,n,c,i,o;for(n={},t=0,i=e.length;t<i;t++)null==n[o=e[t]]&&(n[o]=0),n[o]++;for(c in n)if(n[c]%3!=0)return!1;return!0},_registerEventListener:function(){return t.bindEvent("game_test",function(){return cc.director.loadScene("game"),cc.log("Arkad this is a test")}),t.bindEvent("game_get_level",function(e){return function(t){return t(e._createLevel())}}(this)),t.bindEvent("game_click",function(e){return function(n){var c,i,o,r,s;if(i=n.iconIndex,c=n.deskIndex,e._collectTable.length<7)return o=(s=e._interElement(i,c))[0],null!=(r=s[1])&&t.triggerEvent("insertPos",r),t.triggerEvent("flyIcon",{deskIndex:c,num:o,callback:function(){return e.scheduleOnce(function(){if(e._eraseElement(),e._collectTable.length>=7)return t.setDataOnNode("fail"),cc.director.loadScene("gameover")},.1)}})}}(this))}})}.call(this),cc._RF.pop()},{"../common/Utils":"Utils"}],main:[function(e,t,n){"use strict";cc._RF.push(t,"4b2efypejRI2YtGP55ratom","main"),function(){var t;t=e("../common/Utils"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},update:function(e){},onTest:function(){return t.triggerEvent("game_test")}})}.call(this),cc._RF.pop()},{"../common/Utils":"Utils"}]},{},["Record","Utils","logic","game","gameOver","iconView","main"]);